<div class="container position-relative">
  <add-address-button></add-address-button>
  <div *ngIf="loading" class="loading">
    <mat-spinner></mat-spinner>
  </div>
  <table class="addresses-table mat-elevation-z8" mat-table [dataSource]="addresses">

    <ng-container matColumnDef="no.">
      <th mat-header-cell *matHeaderCellDef> No. </th>
      <td mat-cell class="number-column" *matCellDef="let i=index">{{i+1}}.</td>
    </ng-container>

    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef> Address </th>
      <td mat-cell *matCellDef="let address">{{address.streetName + ' ' + address.blockNumber}}</td>
    </ng-container>

    <ng-container matColumnDef="apartmentCount">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let address">{{address.apartmentCount}} ap.</td>
    </ng-container>

    <ng-container matColumnDef="empty-cell">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="filter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <input matInput [(ngModel)]="filter.name" (keyup)="applyFilter()" placeholder="Filter">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </th>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-header-row *matHeaderRowDef="['empty-cell', 'filter', 'empty-cell']"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectAddress(row)"></tr>

    <div infiniteScroll
         [infiniteScrollDistance]="1"
         [infiniteScrollThrottle]="1000"
         [infiniteScrollContainer]="addresses-table"
         (scrolled)="getChunk()">
    </div>

  </table>
</div>
